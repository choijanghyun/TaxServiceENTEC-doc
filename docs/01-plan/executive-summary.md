# 경정청구 환급액 계산 시스템 - 경영진 요약 보고서

> **작성일**: 2026-02-17
> **작성자**: Product Manager Agent
> **보고 대상**: 프로젝트 의사결정자

---

## 1. Executive Summary (한 페이지 요약)

### 프로젝트 목표
법인사업자(법인세) 및 개인사업자(종합소득세)의 경정청구 시 **모든 공제·감면 항목을 자동 점검**하여 **환급액을 극대화**하는 AI 기반 통합 시스템 개발

### 핵심 가치 제안
- **환급 누락 방지**: 37~40개 점검항목 자동 검증 (세무대리인 수작업 대비 100% 완전성)
- **최적 전략 제시**: 감면 vs 공제 조합 비교 분석 (실질 환급액 기준)
- **법령 정합성**: 과세연도별 세법 자동 매칭 (2020~2026년 법령 변경 반영)
- **감사 추적**: 전 계산 단계 이력 보존 (국세청 심사 대응)

### MVP 일정 및 예산
- **기간**: 6주 (2026.02.17 ~ 2026.03.31)
- **인력**: 백엔드 2명, 프론트엔드 1명, QA 1명
- **마일스톤**:
  - Week 3: 사전 점검 엔진 완료
  - Week 5: 최적 조합 산출 완료
  - Week 6: 통합 테스트 및 배포

---

## 2. 비즈니스 요구사항 (Business Context)

### 2.1 현황 문제
1. **수작업 누락 리스크**: 조세특례제한법 상 14개 주요 공제·감면 중 평균 3~5개 미신청
2. **복잡한 상호배제 규칙**: 제6조+제29조의8 중복 여부가 과세연도에 따라 변경 (2024년 이전 가능 → 2025년 이후 불가)
3. **세법 개정 추적 부담**: 최저한세율 변경(법인 2023년 개정), 수입배당금 익금불산입 3단계 개편 등
4. **개인/법인 혼동**: 최저한세 기준 차이(법인: 과세표준×7~17%, 개인: 산출세액×35%/45%), 적용순서 근거법 상이

### 2.2 목표 고객
| 고객군 | 규모 | 연간 경정청구 건수 | 니즈 |
|--------|------|-------------------|------|
| **세무법인** | 대형 10곳, 중소형 50곳 | 5,000건/년 | 대량 처리, 국세청 제출 자료 자동화 |
| **법인 재무팀** | 상장법인 200곳 | 1,000건/년 | 이월결손금·R&D·투자공제 누락 확인 |
| **개인사업자** | 중소기업 10,000곳 | 3,000건/년 | 다사업장 감면율 차등, 소득공제 최적화 |

### 2.3 ROI 추정
- **세무대리인**: 건당 점검 시간 4시간 → 30분 (87.5% 단축)
- **환급액 증대**: 평균 누락 공제 건당 500만원 추가 환급 (전체 건수의 30% 예상)
- **시장 규모**: 연간 경정청구 9,000건 × 수수료 50만원 = 45억원

---

## 3. 핵심 기능 요구사항 (55개 FR 중 Top 10)

| 순위 | ID | 기능 | 우선순위 | 비즈니스 임팩트 |
|:----:|----|----|:--------:|----------------|
| 1 | FR-11 | 경정청구 불가 사유 사전 차단 (결산조정 Hard Fail) | Must | 국세청 거부 리스크 원천 차단 |
| 2 | FR-37 | 그룹별 비교 분석 (감면 vs 공제) | Must | 환급액 극대화 핵심 로직 |
| 3 | FR-38 | 최저한세 적용 (법인/개인 분기) | Must | 공제 한도 정확도 결정 |
| 4 | FR-21 | 창업중소기업 감면 (§6, 인구감소지역 100%) | Must | 최대 1억원 감면 |
| 5 | FR-22 | 중소기업 특별세액감면 (§7, 다사업장 차등) | Must | 개인 다사업장 필수 |
| 6 | FR-23 | 통합고용세액공제 (§29의8) | Must | 고용 증가 시 최대 환급 |
| 7 | FR-26 | R&D 세액공제 (§10, 최저한세 3단계 배제) | Must | 제조업 핵심 공제 |
| 8 | FR-41 | 순환참조 해결 (과세표준↔최저한세 수렴) | Must | 계산 정확성 필수 |
| 9 | FR-49 | 최종 보고서 3종 생성 | Must | 경영진/세무대리인/국세청 각 대상별 |
| 10 | FR-16 | 71개 검증 규칙 실행 (V/C/B/L/X/W) | Must | 입력 데이터 정합성 보장 |

---

## 4. 사용자 스토리 (User Personas)

### Persona 1: 세무대리인 김세무 (Primary User)
- **연령**: 45세, 세무사 20년차
- **페인 포인트**:
  - 조특법 개정 추적 어려움 (연 2~3회 개정)
  - 고객 50곳 × 연평균 2건 = 100건 수작업 부담
  - 국세청 첨부 자료 작성 시간 과다
- **시나리오**: 고객사 재무제표 JSON 업로드 → 자동 점검 → 그룹별 비교표 확인 → 최적 전략 선택 → 국세청 제출 보고서 다운로드

### Persona 2: 법인 재무담당 박재무 (Secondary User)
- **연령**: 38세, 회계사 15년차
- **페인 포인트**:
  - 이월결손금 vs 소급공제 최적 선택 불확실
  - 환급액 예측 불가로 자금 계획 수립 어려움
- **시나리오**: 직접 입력 모드 → 경영진용 요약 보고서 확인 → 세무대리인 상세 검토 의뢰

### Persona 3: 개인사업자 이사업 (Tertiary User)
- **연령**: 52세, 창업 10년차
- **페인 포인트**:
  - 다사업장(비수도권+수도권) 감면율 차등 계산 복잡
  - 근로소득 합산 시 세율구간 변동 영향 파악 어려움
- **시나리오**: 간소화 입력폼 → 환급액 예상 확인 → 세무대리인 연결

---

## 5. 기능 우선순위 (MoSCoW)

### Must Have (MVP - 6주, 35개 FR)
**핵심 모듈**:
- M1 입력 관리: req_id 발급, JSON 저장, 요약 생성
- M3 사전 점검: 불가 사유 차단, 기한·중소기업·소재지·상시근로자 판단
- M4 개별 공제·감면 (8개): 창업감면, 중소기업감면, 통합고용, 통합투자, R&D, 외국납부세액, 의료비·교육비, 기장세액공제
- M5 최적 조합: 상호배제, 최저한세, 농특세, 그룹 비교
- M6 최종 산출: 환급액 비교표, 환급가산금, 보고서 3종

**API**:
- POST /api/v1/requests (요청 생성)
- GET /api/v1/requests/{req_id}/status (진행 상태)
- PUT /api/v1/requests/{req_id}/calculate (계산 실행)
- GET /api/v1/requests/{req_id}/report (보고서 조회)

### Should Have (Phase 2 - 4주, 12개 FR)
- M4 나머지 6개 공제·감면: 사회보험료, 이월결손금, 수입배당금, 결손금 소급공제, 세무조정, 성실신고확인비용
- M7 시뮬레이션: 다수 과세연도, 사후관리 리스크
- 추가 확인 필요 항목 안내

### Could Have (Phase 3 - 2주, 8개 FR)
- Excel/PDF 업로드 파서
- 세무대리인 대량 처리 (50건 일괄)
- 관리자 대시보드

### Won't Have (현 버전 제외)
- 국세청 API 자동 제출
- 전자증빙 자동 수집
- 모바일 앱
- AI 챗봇 대화형 UI

---

## 6. MVP 범위 (Minimum Viable Product)

### 포함 기능
| 계층 | 기능 | 커버리지 |
|------|------|---------|
| **입력** | 법인/개인 스키마 37개, req_id 이력 관리 | 100% |
| **검증** | 71개 규칙 중 50개 (V19 + C13 + B11 + L09 핵심) | 70% |
| **계산** | 14개 공제·감면 중 8개 (창업·중소·고용·투자·R&D·외국·의료·기장) | 57% |
| **조합** | 상호배제·최저한세·농특세·그룹 비교 | 100% |
| **보고** | 환급액 비교표·환급가산금·보고서 3종 | 100% |

### 제외 기능 (Phase 2 이후)
- 나머지 6개 공제·감면 (사회보험료, 이월결손금, 수입배당금 등)
- 다수 과세연도 시뮬레이션
- 대량 처리 (50건 일괄)

### 성공 기준
- [ ] 법인 10건 + 개인 10건 통합 테스트 100% 통과
- [ ] 계산 정확성 오차율 0% (56개 공식 단위 테스트)
- [ ] API 응답시간 P95 < 5초
- [ ] 코드 커버리지 80% 이상

---

## 7. 기술 아키텍처 (High-Level)

### 7.1 시스템 구성

```
┌─────────────┐
│  Front-end  │  (Phase 2)
│  (React)    │
└──────┬──────┘
       │ REST API
┌──────▼────────────────────────────────────┐
│  Spring Boot Application                  │
│  ┌────────────────────────────────────┐   │
│  │ Presentation Layer (Controllers)   │   │
│  └────────────┬───────────────────────┘   │
│               │                            │
│  ┌────────────▼───────────────────────┐   │
│  │ Application Layer (Services)       │   │
│  │  - M3 사전 점검 (검증 엔진)         │   │
│  │  - M4 개별 공제·감면 (14개 모듈)    │   │
│  │  - M5 최적 조합 (순환참조 해결)     │   │
│  │  - M6 보고서 생성                   │   │
│  └────────────┬───────────────────────┘   │
│               │                            │
│  ┌────────────▼───────────────────────┐   │
│  │ Domain Layer (Entities, Services)  │   │
│  │  - ReqId, TaxType, RequestStatus   │   │
│  │  - 56개 계산 공식 (F01~F56)         │   │
│  └────────────┬───────────────────────┘   │
│               │                            │
│  ┌────────────▼───────────────────────┐   │
│  │ Infrastructure Layer (Persistence) │   │
│  │  - JPA + MyBatis                   │   │
│  │  - 83개 테이블 (RI/SV/CO/AL/RF)     │   │
│  └────────────────────────────────────┘   │
└───────────────────┬───────────────────────┘
                    │
           ┌────────▼────────┐
           │  PostgreSQL 15  │
           │  (83개 테이블)   │
           └─────────────────┘
```

### 7.2 핵심 설계 원칙
1. **Request-Driven 모델**: 1회 경정청구 진단 = 1 트랜잭션 (req_id 기준)
2. **원본 불변성**: RI_S_RAW_DATA INSERT ONLY (수정 불가, 재요청만 가능)
3. **Hybrid 저장**: 입력/출력은 JSON (유연성), 계산은 RDB (성능)
4. **절사 원칙**: 금액 10원, 비율 소수점 3자리, **반올림 절대 금지**
5. **세목 분기**: TAX_TYPE (CORP/INC) 기반 법인/개인 로직 분리

### 7.3 데이터베이스 (83개 테이블)
| 주제영역 | 테이블 수 | 설명 |
|---------|:--------:|------|
| RI_ (입력) | 37개 | 요청 마스터, 원시 JSON, 법인/개인 스키마 |
| SV_ (요약·검증) | 8개 | 계산용 요약 4개 + 점검 결과 4개 |
| CO_ (산출) | 11개 | 상시근로자, 개별 공제·감면, 조합, 환급액, 보고서 JSON |
| AL_ (감사) | 1개 | 전 단계 계산 이력 |
| RF_ (기준정보) | 26개 | 세율·공제율·법령버전·환율·이자율 (req_id 없음) |

---

## 8. 위험 요소 및 완화 전략

| 위험 | 영향도 | 발생확률 | 완화 전략 | 책임자 |
|------|:------:|:--------:|----------|--------|
| **법령 개정 지연 반영** | High | Medium | RF_S_LAW_VERSION 월 1회 갱신, 국세청 공고 모니터링 | PO |
| **복잡한 순환참조 미수렴** | High | Low | MX-01 최대 5회 제한 + 1원 허용 오차, 로그 추적 | Tech Lead |
| **개인정보 유출** | High | Low | AES-256 암호화, req_id JWT 토큰화, 90일 자동 삭제 | Security |
| **검증 규칙 누락** | Medium | Medium | 프롬프트 점검항목 vs 구현 항목 매핑표 작성·검토 | QA |
| **성능 저하 (대용량)** | Low | Medium | 요약 테이블 인덱싱, 비동기 처리 (Phase 2) | Backend |
| **국세청 제출 양식 변경** | Medium | Medium | CO_S_REPORT_JSON 템플릿 분리 관리, 버전 관리 | PO |

---

## 9. 일정 및 마일스톤

### Phase 1 (MVP - 6주)

```
Week 1: 환경 설정 & 데이터 모델링
├─ PostgreSQL 스키마 생성 (83개 테이블)
├─ JPA Entity 작성
└─ req_id 생성 로직

Week 2: 입력 관리 (M1)
├─ POST /requests API
├─ JSON INSERT ONLY
└─ SV_* 파싱 로직

Week 3: 사전 점검 (M3) ★ Milestone 1
├─ 불가 사유 차단
├─ 기한·중소기업·소재지·상시근로자
└─ 검증 엔진 50개 규칙

Week 4: 개별 공제·감면 (M4)
├─ 창업·중소기업감면
├─ 통합고용·투자
└─ R&D·외국납부세액·의료비·기장

Week 5: 최적 조합 (M5) ★ Milestone 2
├─ 상호배제·최저한세
├─ 농특세·그룹 비교
└─ 순환참조 해결

Week 6: 최종 산출 & 통합 테스트 ★ MVP 완료
├─ 환급액 비교표·환급가산금
├─ 보고서 3종 생성
└─ 통합 테스트 (법인 10건, 개인 10건)
```

### Phase 2 (고도화 - 4주)

```
Week 7: 나머지 공제·감면 (6개)
Week 8: 세무조정·사후관리
Week 9: 시뮬레이션·대량 처리
Week 10: 성능 최적화·배포 ★ Phase 2 완료
```

---

## 10. 의사결정 요청 사항

### 10.1 승인 요청
- [x] **프로젝트 착수 승인** (Phase 1 MVP 6주)
- [x] **기술 스택 승인** (Spring Boot 3.x, PostgreSQL 15, JPA/MyBatis)
- [x] **인력 투입 승인** (백엔드 2명, 프론트 1명, QA 1명)

### 10.2 검토 요청
- [ ] **우선순위 조정 여부**: Should Have 기능 중 MVP 포함 희망 항목 (사회보험료공제, 이월결손금 등)
- [ ] **Phase 2 진행 여부**: MVP 완료 후 고도화 단계 착수 결정 시점

### 10.3 이해관계자 확인
- [ ] **세무법인 파트너십**: 베타 테스트 협력 세무법인 섭외 (3곳 이상)
- [ ] **국세청 검토 의견**: 보고서 양식 사전 검토 필요 여부

---

## 11. 결론 및 권고사항

### 핵심 메시지
1. **환급액 극대화 자동화**는 세무 서비스 시장의 핵심 니즈이며, 경쟁 우위 확보 가능
2. **MVP 6주 일정**은 핵심 기능(35개 FR) 중심으로 실현 가능한 범위
3. **법인/개인 세목 분기**는 기술 복잡도를 높이지만, 시장 커버리지 확대에 필수

### 즉시 실행 권장
- [x] **Phase 1 착수**: 2026.02.17 (Week 1 환경 설정 시작)
- [ ] **베타 테스트 파트너 섭외**: 세무법인 3곳 (Week 4까지 확보)
- [ ] **국세청 사전 협의**: 보고서 양식 검토 (Week 5까지)

### 향후 검토 과제
- Phase 2 진행 여부 결정 (Week 6 통합 테스트 후)
- 대량 처리 기능 우선순위 재평가 (세무법인 니즈 확인 후)
- 국세청 API 연동 타당성 검토 (정부 정책 변화 모니터링)

---

**문의사항 연락처**: Product Manager Agent
**다음 보고 예정일**: 2026.02.24 (Week 1 완료 보고)
